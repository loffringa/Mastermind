(function(t){function e(e){for(var r,s,u=e[0],a=e[1],c=e[2],p=0,h=[];p<u.length;p++)s=u[p],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,u=1;u<n.length;u++){var a=n[u];0!==i[a]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},i={app:0},o=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/ICT-DEV-OO-18-mastermind-frontend/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var l=a;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("85ec"),i=n.n(r);i.a},"16c0":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"wrapper"},[t._m(0),n("div",{staticClass:"container"},[n("api-connector"),n("hr"),n("board")],1),t._m(1)])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("h1",[t._v("Mastermind")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",[n("p",[n("small",[t._v("Made by "),n("a",{attrs:{href:"https://github.com/che-ict",target:"_blank"}},[t._v("HBO-ICT | CHE Ede")]),t._v(", inspired by "),n("a",{attrs:{href:"https://github.com/klomontes",target:"_blank"}},[t._v("klomontes")])])])])}],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"board"},[t.initialized?t._e():n("span",[t._v("Add an API to get started with Mastermind!")]),t.initialized?n("div",{staticClass:"game"},[n("rows",{attrs:{id:t.id}}),n("choice-maker",{attrs:{id:t.id}})],1):t._e()])},u=[],a=(n("96cf"),n("1da1")),c=n("bc3a"),l=n.n(c);function p(){return window.localStorage.getItem("apiurl")}function h(t){window.localStorage.setItem("apiurl",t)}function d(){return l.a.create({baseURL:p(),timeout:1e3,headers:{Accept:"application/json","Content-Type":"application/json"}})}var f={getApiUrl:p,setApiUrl:h,getInstance:d};function v(){return m.apply(this,arguments)}function m(){return m=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",f.getInstance().post("/StartNewGame").then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function w(t){return g.apply(this,arguments)}function g(){return g=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",f.getInstance().get("/QuitGame/"+e).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function b(t){return y.apply(this,arguments)}function y(){return y=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",f.getInstance().get("/Status/"+e).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}function k(t){return _.apply(this,arguments)}function _(){return _=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",f.getInstance().get("/AllPlayedRows/"+e).then((function(t){return t.data.reverse()})));case 1:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}function C(t,e){return $.apply(this,arguments)}function $(){return $=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",f.getInstance().post("/NextTry/"+e,n).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),$.apply(this,arguments)}var E={startNewGame:v,quitGame:w,getStatus:b,getAllPlayedRows:k,doNextTry:C},x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"guesses"}},[n("hidden-row",{attrs:{id:t.id}}),t._l(t.emptyRows,(function(e,r){return n("div",{key:"_"+r,staticClass:"guess"},t._l(4,(function(t){return n("div",{key:t,staticClass:"socket"})})),0)})),n("choice-row"),t._l(t.rows,(function(e,r){return n("div",{key:r,staticClass:"guess"},t._l(e.pins,(function(e,r){return n("div",{key:r,staticClass:"socket",class:[t.getPinColour(e.colour)]})})),0)}))],2),n("div",{attrs:{id:"hints"}},[t._l(t.emptyRows,(function(t,e){return n("div",{key:"_"+e,staticClass:"hint"},[n("hints-block")],1)})),n("choice-hint"),t._l(t.rows,(function(t,e){return n("div",{key:e,staticClass:"hint"},[n("hints-block",{attrs:{hints:t}})],1)}))],2)])},P=[],O=(n("fb6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row"},t._l(t.result[0],(function(t,e){return n("div",{key:0+e,staticClass:"js-hint-socket socket",class:[t]})})),0),n("div",{staticClass:"row"},t._l(t.result[1],(function(t,e){return n("div",{key:1+e,staticClass:"js-hint-socket socket",class:[t]})})),0)])}),j=[],R={name:"HintsBlock",props:{hints:{type:Object,default:function(){return{score:{same:0,sameColour:0}}}}},computed:{result:function(){for(var t=new Array,e=this.hints.score.same,n=this.hints.score.sameColour,r=0;r<e;r++)t.push("black");for(var i=0;i<n;i++)t.push("almost");if(t.length<4)while(t.length<4)t.push(null);return this.chunkArray(t,2)}},methods:{chunkArray:function(t,e){for(var n=Math.max(t.length/e,1),r=[],i=0;i<e;i++)n*(i+1)<=t.length&&r.push(t.slice(n*i,n*(i+1)));return r}}},B=R,A=n("2877"),S=Object(A["a"])(B,O,j,!1,null,null,null),I=S.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("div",{staticClass:"guess"},t._l(t.allPins,(function(e,r){return n("div",{key:r,staticClass:"socket",class:[t.getPinColour(e)]})})),0):t._e()},T=[],G=["black","blue","green","red","yellow","white"];function H(t){return G.length>t?G[t]:null}var N={getPinColour:H},U={name:"ChoiceRow",data:function(){return{pins:[],visible:!0}},computed:{allPins:function(){var t=this.pins.slice();while(t.length<4)t.push(null);return t}},methods:{push:function(t){var e=parseInt(t);this.pins.push(e)},pop:function(t){this.pins.pop(t)},clear:function(){this.pins=[]},getPinColour:function(t){return N.getPinColour(t)}},mounted:function(){var t=this;window.EventBus.$on("choice:push",this.push),window.EventBus.$on("choice:pop",this.pop),window.EventBus.$on("choice:clear",this.clear),window.EventBus.$on("status:lost",(function(){t.visible=!1}))}},z=U,Y=Object(A["a"])(z,M,T,!1,null,null,null),J=Y.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("div",{staticClass:"hint"},[n("hints-block")],1):t._e()},q=[],D={name:"ChoiceRow",components:{HintsBlock:I},data:function(){return{visible:!0}},mounted:function(){var t=this;window.EventBus.$on("status:lost",(function(){t.visible=!1}))}},L=D,Q=Object(A["a"])(L,W,q,!1,null,null,null),V=Q.exports,F=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},K=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"code row"},[n("div",{staticClass:"secret socket"},[t._v("?")]),n("div",{staticClass:"secret socket"},[t._v("?")]),n("div",{staticClass:"secret socket"},[t._v("?")]),n("div",{staticClass:"secret socket"},[t._v("?")])])}],X={name:"HiddenRow",props:["id"],data:function(){return{pins:[]}},computed:{allPins:function(){var t=this.pins.slice();while(t.length<4)t.push(null);return t}},methods:{checkStatus:function(){var t=this;E.getStatus(this.id).then((function(e){!0===e.isWon&&(window.EventBus.$emit("status:won",e.rowsPlayed),t.$swal({icon:"success",title:"You won!",text:"I doubt if it's the Mastermind skills or coding skills..."})),!1===e.isWon&&e.rowsPlayed>=10&&(window.EventBus.$emit("status:lost",e.rowsPlayed),t.$swal({icon:"error",title:"You lost...",text:"You lost the game... Maybe you should hack your own backend to win?"}))})).catch((function(){t.$swal({icon:"error",title:"Something went wrong",text:"Check your developer console for more information"})}))},getPinColour:function(t){return N.getPinColour(t)}},mounted:function(){window.EventBus.$on("field:update",this.checkStatus)}},Z=X,tt=Object(A["a"])(Z,F,K,!1,null,null,null),et=tt.exports,nt={name:"Rows",components:{HintsBlock:I,ChoiceRow:J,ChoiceHint:V,HiddenRow:et},data:function(){return{rows:[]}},props:["id"],computed:{emptyRows:function(){var t=this.rows.slice(),e=10-t.length;return e>0?e-1:e}},methods:{updateRows:function(){var t=this;this.id&&E.getAllPlayedRows(this.id).then((function(e){console.log("mastermind.getAllPlayedRows",e,t.rows.slice()),t.rows=e})).catch((function(){t.$swal({icon:"error",title:"Something went wrong",text:"Check your developer console for more information"})}))},getPinColour:function(t){return N.getPinColour(t)}},mounted:function(){this.updateRows(),window.EventBus.$on("field:update",this.updateRows)}},rt=nt,it=Object(A["a"])(rt,x,P,!1,null,null,null),ot=it.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"container",attrs:{id:"options"}},[n("button",{staticClass:"option black",on:{click:function(e){return t.push(0)}}}),n("button",{staticClass:"option blue",on:{click:function(e){return t.push(1)}}}),n("button",{staticClass:"option green",on:{click:function(e){return t.push(2)}}}),n("button",{staticClass:"option red",on:{click:function(e){return t.push(3)}}}),n("button",{staticClass:"option yellow",on:{click:function(e){return t.push(4)}}}),n("button",{staticClass:"option white",on:{click:function(e){return t.push(5)}}}),n("button",{attrs:{id:"delete"},on:{click:t.sendTry}},[t._v("✔")]),n("button",{attrs:{id:"delete"},on:{click:function(e){return t.pop()}}},[t._v("⇠")])])])},ut=[],at=(n("d81d"),n("a9e3"),{name:"ChoiceMaker",props:["id"],data:function(){return{pins:[]}},methods:{sendTry:function(){var t=this;this.id&&E.doNextTry(this.id,this.allPins().map(Number)).then((function(){window.EventBus.$emit("field:update"),t.reset()})).catch((function(){t.$swal({icon:"error",title:"Something went wrong",text:"Check your developer console for more information"})}))},reset:function(){this.pins=[],window.EventBus.$emit("choice:clear")},push:function(t){this.pins.length<4&&(this.pins.push(t),window.EventBus.$emit("choice:push",t))},pop:function(t){this.pins.length>0&&(this.pins.pop(t),window.EventBus.$emit("choice:pop",t))},allPins:function(){var t=this.pins.slice();while(t.length<4)t.push(null);return t}}}),ct=at,lt=Object(A["a"])(ct,st,ut,!1,null,null,null),pt=lt.exports,ht={name:"Board",components:{Rows:ot,ChoiceMaker:pt},data:function(){return{id:null}},computed:{initialized:function(){return!!this.id}},methods:{startGame:function(){var t=this;E.startNewGame().then((function(e){t.id=e})).catch((function(){t.$swal({icon:"error",title:"Something went wrong",text:"Check your developer console for more information"})}))}},mounted:function(){var t=this;window.EventBus.$on("url:set",this.startGame),window.EventBus.$on("url:clear",(function(){t.id=null}))}},dt=ht,ft=(n("b2e8"),Object(A["a"])(dt,s,u,!1,null,null,null)),vt=ft.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"connection"},[n("h4",[t._v("Connect Mastermind to your API")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],attrs:{type:"text",placeholder:"https://localhost:44367/api/Mastermind/"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}}),n("br"),n("br"),n("button",{staticClass:"green",attrs:{id:"newGame"},on:{click:t.saveUrl}},[t._v("Save and start")])])},wt=[],gt={name:"ApiConnector",data:function(){return{url:null}},methods:{saveUrl:function(){this.url&&(f.setApiUrl(this.url),window.EventBus.$emit("url:set"))},clear:function(){this.url="",f.setApiUrl(""),window.EventBus.$emit("url:clear")}},mounted:function(){this.url=f.getApiUrl()}},bt=gt,yt=(n("6fc0"),Object(A["a"])(bt,mt,wt,!1,null,null,null)),kt=yt.exports,_t={name:"App",components:{Board:vt,ApiConnector:kt}},Ct=_t,$t=(n("034f"),Object(A["a"])(Ct,i,o,!1,null,null,null)),Et=$t.exports,xt=n("5886");r["a"].use(xt["a"]),r["a"].config.productionTip=!1,window.EventBus=new r["a"],n("5aea"),n("e382"),n("4413"),new r["a"]({render:function(t){return t(Et)}}).$mount("#app")},"5aea":function(t,e,n){},"6fc0":function(t,e,n){"use strict";var r=n("938c"),i=n.n(r);i.a},"85ec":function(t,e,n){},"938c":function(t,e,n){},b2e8:function(t,e,n){"use strict";var r=n("16c0"),i=n.n(r);i.a},e382:function(t,e,n){}});
//# sourceMappingURL=app.3a514ec0.js.map